var pUUID=document.getElementById("pUUID"),myUUID=document.getElementById("myUUID"),chat=document.getElementById("chat"),left="",i=0;const formatedTimestamp=dated=>{var d=new Date(dated),date_format_str;return(2==d.getDate().toString().length?d.getDate().toString():"0"+d.getDate().toString())+"."+(2==(d.getMonth()+1).toString().length?(d.getMonth()+1).toString():"0"+(d.getMonth()+1).toString())+"."+d.getFullYear().toString()+" "+(2==d.getHours().toString().length?d.getHours().toString():"0"+d.getHours().toString())+":"+(2==(5*parseInt(d.getMinutes()/5)).toString().length?(5*parseInt(d.getMinutes()/5)).toString():"0"+(5*parseInt(d.getMinutes()/5)).toString())};async function loadChat(){chat.innerHTML='<div class="loader">Loading...</div>',await fetch("/api/chat/getchat",{method:"post",headers:{"Content-type":"application/x-www-form-urlencoded; charset=UTF-8"},body:"pUUID="+pUUID.value+"&myUUID="+myUUID.value}).then((function(response){200===response.status?response.json().then((function(data){for(chat.innerHTML="",i=0;i<Object.keys(data).length;i++)left=data[i].message_from==pUUID.value?" chat-left":"",chat.innerHTML+='<div class="chat '+left+'"><div class="chat-body"><div class="chat-message">'+data[i].message+'<div class="chat-footer">'+formatedTimestamp(data[i].sending_time)+"</div></div></div></div>"})):console.log("Ohje hier ist ein Fehler entstanden. Status Code: "+response.status)})).catch((function(error){console.log("Request failed",error)}))}document.addEventListener("DOMContentLoaded",(function(event){loadChat(),ClassicEditor.create(document.querySelector("#editor"),{toolbar:{items:["heading","|","bold","italic","underline","link","bulletedList","numberedList","|","blockQuote","insertTable","mediaEmbed","|","alignment","fontSize","fontFamily","fontColor","fontBackgroundColor","highlight","|","undo","redo"]},language:"de",table:{contentToolbar:["tableColumn","tableRow","mergeTableCells","tableCellProperties","tableProperties"]},licenseKey:""}).then(editor=>{window.editor=editor}).catch(error=>{console.error("Oops, something went wrong!"),console.error("Please, report the following error on https://github.com/ckeditor/ckeditor5/issues with the build id and the error stack trace:"),console.warn("Build id: itn5mxk7qs88-11u2dh141yso"),console.error(error)})}));